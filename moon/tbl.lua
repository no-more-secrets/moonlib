-----------------------------------------------------------------
-- Table methods.
-----------------------------------------------------------------
local M = {}

-----------------------------------------------------------------
-- Aliases.
-----------------------------------------------------------------
local insert = table.insert
local sort = table.sort

-----------------------------------------------------------------
-- Implementation.
-----------------------------------------------------------------
function M.on_ordered_kv( tbl, op )
  local keys = {}
  for k, _ in pairs( tbl ) do insert( keys, k ) end
  sort( keys )
  for _, k in ipairs( keys ) do
    local v = tbl[k]
    assert( v ~= nil ) -- v could be `false`.
    op( k, v )
  end
end

-----------------------------------------------------------------
-- Finished.
-----------------------------------------------------------------
return M
